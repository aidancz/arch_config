#!/bin/sh

output="$(date +'%Y%m%d-%H%M%S-%6N').png"
xclip_cmd="xclip -sel clip -t image/png"

menu="\
a selected area
current window
full screen
a selected area (copy)
current window (copy)
full screen (copy)
"

case "$(printf "%s" "$menu" | dmenu -l 6 -i -p "Screenshot which area?")" in
	"a selected area") maim -s pic-selected-"${output}" ;;
	"current window") maim -q -d 0.2 -i "$(xdotool getactivewindow)" pic-window-"${output}" ;;
	"full screen") maim -q -d 0.2 pic-full-"${output}" ;;
	"a selected area (copy)") maim -s | ${xclip_cmd} ;;
	"current window (copy)") maim -q -d 0.2 -i "$(xdotool getactivewindow)" | ${xclip_cmd} ;;
	"full screen (copy)") maim -q -d 0.2 | ${xclip_cmd} ;;
esac
